<!DOCTYPE html>
 
<html lang="ru">

<head> 
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name ="title" content="Александр Мануйлович">
    <meta name="description" content="Александр Мануйлович. Живопись, графика, иллюстрации, дизайн, книги, тексты, веб-дизайн">
    <meta name="keywords" content="мануйлович, александр, живопись, графика, иллюстрации, дизайн, книги, тексты, веб-дизайн">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    
    <link rel="stylesheet" type="text/css" href="css/player.css">
    <link rel="shortcut icon" href="../../img/am.png" type="image/x-icon">

    <title>Александр Мануйлович</title>
    
    <style>
        .pic {
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
        }
        span {
        color: white;   
        }
    </style>

</head>
<body>

<!-- --------------------- КАРТИНКА --------------------- -->

<div class="place pic"></div>
<div class="panel">
    <button class="key"></button>
    <span class="positioni">0</span>
    <span class="positionj">0</span>
    <span class="regime">regime</span> 
</div>
<div class="next">
    <img class="arr" src="img/arrow1.svg">
</div>
<div class="previous">
    <img class="arr" src="img/arrow2.svg">
</div>

<!--  --------------------- СКРПИПТ -------------------- -->

<script>
var positioni = document.querySelector('.positioni');
var positionj = document.querySelector('.positionj');
var regime = document.querySelector('.regime');

// Формируем массив с путями к картинкам по порядку
var inOrder = new Array();

for (var i = 1; i <= 13; i++) {
    var path = 'url("../../pictures/1painting/01acryl/acr' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/02natur/ntr' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/03buddagirl/bdd' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/04frames/frm' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/05stel/tel' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/06tonal/tnl' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 6; i++) {
    var path = 'url("../../pictures/1painting/07hyperdress/drs' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 6; i++) {
    var path = 'url("../../pictures/1painting/08ornithologi/orn' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 5; i++) {
    var path = 'url("../../pictures/1painting/09zimmer/zim' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/10dantoys/dnt' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 4; i++) {
    var path = 'url("../../pictures/1painting/11point/pnt' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 2; i++) {
    var path = 'url("../../pictures/1painting/12hat/hat' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 11; i++) {
    var path = 'url("../../pictures/1painting/13oldoil/oop' + i + '.jpg")'; 
    inOrder.push(path);
}
for (var i = 1; i <= 39; i++) {
    var path = 'url("../../pictures/2graphics/11cardboard/crd' + i + '.jpg")'; 
    inOrder.push(path);
}

// Длинна получившегося массива
var n = inOrder.length;

// Формируем массив с натуральными числами в случайном порядке
var randomArray = [0];

function shuffle() {
  for(var i = 0 ; i < n ; i++) {
      var randomNumber = Math.floor(Math.random() * n + 1);
      for(var j = 0 ; j <= i ; j++) {
          if (randomArray[j] == randomNumber) {
          randomNumber = Math.floor(Math.random() * n + 1);
          j = 0;
          }
      }
      randomArray.push(randomNumber);
  }  
  randomArray.shift();
}

shuffle()

// Формируем массив с путями к картинкам в случайном порядке
var mixedUp = new Array();
for(var i = 0 ; i < n ; i++) {
    var j = randomArray[i]-1;
    mixedUp[i] = inOrder[j];
}  

// Выбор - по порядку или в случайном порядке
var showArray = new Array();
showArray = mixedUp; // Массив в случайном порядке
showArray = inOrder; // Массив по порядку

// Функция, создающая стиль картинки (выводящая картинку на экран)
function picstyle(where) {
picUrl = where;
pic.style.background = picUrl;
pic.style.backgroundRepeat = 'no-repeat';
pic.style.backgroundPosition = 'center';
pic.style.backgroundSize = 'contain';
}

// Создаем переменную, запрашивающую элемент с классом .pic 
var pic = document.querySelector('.pic');

// Настраиваем кнопку
// Статус || stop   ~ autoplay
// Статус >> go     ~ stepplay

var btn = document.querySelector('button'); // Переменная, чтобы задействовать кнопку
var key = document.querySelector('.key');
var gopic = 'url("img/go.svg")';            // Изобрадение для кнопки go
var stoppic = 'url("img/stop.svg")';        // Изобрадение для кнопки stop
key.style.background = stoppic;             // Настраиваем background кнопки
key.style.backgroundColor = 'goldenrod';
key.style.backgroundRepeat = 'no-repeat';
key.style.backgroundPosition = 'center';
key.style.backgroundSize = 'contain';

 
var btnStatus = btn.getAttribute('status');  // переменная со статусом кнопки

var startStatus = 'go'; // начальный статус кнопки, будет передаваться извне

// Устанавливаем начальный вид кнопки, до нажатия:
btn.setAttribute('status', startStatus);
if(startStatus === 'go') {
    btn.setAttribute('status','go');    // устанавливаем статус кнопки
    key.style.background = gopic;       
    key.style.backgroundColor = 'goldenrod';
    key.style.backgroundRepeat = 'no-repeat';
    key.style.backgroundPosition = 'center';
    key.style.backgroundSize = 'contain';
} 
else {
    btn.setAttribute('status','stop');  // устанавливаем статус кнопки
    key.style.background = stoppic;
    key.style.backgroundColor = 'goldenrod';
    key.style.backgroundRepeat = 'no-repeat';
    key.style.backgroundPosition = 'center';
    key.style.backgroundSize = 'contain'; 
}

var interval = 300;    // интервалы между кадрами, будет передаваться извне  

// По нажатию кнопки переключается режим просмотра и меняется внешний вид кнопки:
btn.onclick = function() {
  if(btnStatus === 'stop') {
    btn.setAttribute('status','go');        // устанавливаем статус
    btnStatus = btn.getAttribute('status'); // запоминаем статус 
    key.style.background = gopic;
    key.style.backgroundColor = 'goldenrod';
    key.style.backgroundRepeat = 'no-repeat';
    key.style.backgroundPosition = 'center';
    key.style.backgroundSize = 'contain';
  } 
  else {
    btn.setAttribute('status','stop');      // устанавливаем статус
    btnStatus = btn.getAttribute('status'); // запоминаем статус
    key.style.background = stoppic;
    key.style.backgroundColor = 'goldenrod';
    key.style.backgroundRepeat = 'no-repeat';
    key.style.backgroundPosition = 'center';
    key.style.backgroundSize = 'contain'; 
  }
  if (btnStatus === 'stop') {
    autoplay (i, interval);
    regime.textContent = btnClass;
  }  
  if (i == n) {
    stepplay(0);
  }
}

// ------------------ ЛИСТАНИЕ СТРЕЛКАМИ ------------------

var next = document.querySelector('.next');
var previous = document.querySelector('.previous');

function stepplay(place) {
    i = place;
    function step() {
        var url = showArray[i];
        picstyle(url); 
        next.onclick = function(e) {
            i = i + 1;
            url = showArray[i];
            picstyle(url);
            positioni.textContent = 'i = ' + (i + 1);
            regime.textContent = btnStatus;
        }
        previous.onclick = function(e) {
            i = i - 1; 
            url = showArray[i];
            picstyle(url);
            positioni.textContent = 'i = ' + (i + 1);
            regime.textContent = btnStatus;
        }
    }
        if (i <= n)         
    step();
}

// ------------------ ЛИСТАНИЕ АВТОМАТИЧЕСКОЕ ------------------

// Функция, выводящая картинки с заданной задержкой (temp) по очереди из сформированного массива начиная с определенного места (place)
function autoplay(place, temp) {
    var j = place;
    function picshow() {
        var url = showArray[j]; 
 //       positionj.textContent = 'j = ' + (j + 1);   // проверка j
          regime.textContent = btnStatus;              // вывод на экран j
        picstyle(url);
        if (btnStatus === 'go') {
            i = j - 1;      // Номер выведенного на экран изображения
            j = n + 2;      // Чтобы закончить цикл прокрутки
            stepplay(i);    // Запускаем пошаговый просмотр с текущего
            j = n;          // Чтобы не крутила дальше, иначе дергается
            positioni.textContent = 'i = ' + (i);
            positionj.textContent = 'j = ' + (j + 1);
        }
        j = j + 1;
        control = j;
        if (j <= n) {
            setTimeout(picshow, temp);
            i = j;
            positioni.textContent = 'i = ' + (i);
            positionj.textContent = 'j = ' + (j);
        }
    }
    picshow();
}

// ------------------ ЗАПУСКАЕМ ПЛЕЙЕР ------------------

var i = 0;  // Начтинаем с первого элемена массива
positioni.textContent = 'i = ' + (i);

if (btnStatus === 'stop') {
    autoplay(i, interval);
}
else {
    stepplay(i);
}

</script>

</body>
</html>